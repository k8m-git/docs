If you're using AWS AppSync SDK for iOS (Maintenance mode), we recommend that you upgrade to the [AWS Amplify API category](https://docs.amplify.aws/lib/graphqlapi/getting-started/q/platform/ios/) 

**What does "Maintenance" mean?**
While in maintenance, the AWS AppSync SDK for iOS will continue to receive updates that ensure compatibility with backend services and security updates. No new features will be introduced in the AWS AppSync SDK for iOS.

**How long will Maintenance last?**
AWS AppSync SDK for iOS will be in Maintenance for 12 months i.e until ? ?, ????, after which no new updates will be made. This may result in the APIs going out of sync with the services and result in breaking production apps.

## Option 1: Existing AppSync backend: Upgrade to AWS Amplify

AWS Amplify provides APIs for querying, mutating, and subscribing to data in AppSync with less configuration overhead. Here's an example of running a query in the AWS AppSync SDK for iOS (Maintenance mode) vs. AWS Amplify API category:

**Before: AWS AppSync SDK for iOS (Maintenance mode):**
```swift
let mutationInput = CreateTodoInput(name: "Use AppSync", description:"Realtime and Offline")

appSyncClient?.perform(mutation: CreateTodoMutation(input: mutationInput)) { (result, error) in
    if let error = error as? AWSAppSyncClientError {
        print("Error occurred: \(error.localizedDescription )")
    }
    if let resultError = result?.errors {
        print("Error saving the item on server: \(resultError)")
        return
    }
}
```

**After: AWS Amplify:**
1. Remove AppSync SDK from your packages 

2. Add **AWSAPIPlugin** from Amplify.

```swift
let mutationInput = CreateTodoInput(name: "Use AWSAPIPlugin",
                            description: "Realtime and Offline")
let request = GraphQLRequest(document: CreateTodoMutation.operationString,
                             variables: CreateTodoMutation(input: mutationInput).variables?.jsonObject,
                             responseType: CreateTodoMutation.Data.self)

do {
    let result = try await Amplify.API.mutate(request: request)
    switch result {
    case .success(let todo):
        print("Successfully created todo: \(todo)")
    case .failure(let error):
        print("Got failed result with \(error.errorDescription)")
    }
} catch let error as APIError {
    print("Failed to update todo: ", error)
} catch {
    print("Unexpected error: \(error)")
}
```

### Optimistic UI and cached data revalidation
If you've used the AWS AppSync SDK's caching capabilities for optimistic UI, then we recommend you to follow our [Optimistic UI](/lib/graphqlapi/optimistic-ui) guide. In this guide, you'll learn how to use AWS Amplify's API category in conjunction with SwiftUI to achieve optimistic UI and cached data invalidation use cases.

### Complex objects support
If you were using complex objects in the AWS AppSync SDK for iOS (Maintenance mode), then we recommend you to follow our [Working with Files](/lib/graphqlapi/working-with-files) guide. This guide details the recommended path to store file metadata in your GraphQL API records and use Amplify Storage to store blob data in Amazon S3.